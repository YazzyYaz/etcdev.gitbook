# Emerald Starter Kit

## Create A New Emerald DApp

Emerald SDK utilizes Truffle's smart contract management to compile, deploy, and test smart contracts. However, you don't need to install Truffle!

Make a directory for your DApp. Name the directory `emerald-starter-kit`.

```text
$ mkdir emerald-starter-kit
```

Inside the DApp directory, create a new Emerald DApp with `emerald new`

```text
$ cd emerald-starter-kit
$ emerald new
New Emerald project created
```

## Internals

Looking at what is included in the starter-kit.

```text
$ ls
config            package.json        truffle.js
contracts        public            tsconfig.json
migrations        src            tslint.json
node_modules        test            webpack.config.ts
package-lock.json    truffle-config.js
```

The starter kit is a barebones DApp which uses React. However, Emerald is attentive to specific file structures as Truffle would.

* `contracts/` : directory is for **Solidity** contracts.
  * `Migrations.sol` : is automatically generated by and often does not need to be touched.
  * `Todos.sol` : is the custom smart contract for the DApp. 
* `migrations/` : directory for scriptable deployment files
  * `text/` : directory for  testing the DApp and contracts
* `truffle.js` : blockchain client configuration file.

{% hint style="info" %}
`truffle.js is where the user's Ethereum Classic client in configured.`
{% endhint %}

### **truffle.js**

{% code-tabs %}
{% code-tabs-item title="truffle.js" %}
```javascript
// Common Emerald Wallet "geth" config.
module.exports = {
    networks: {
      development: {
        host: 'localhost',
        port: *,
        gas: *,
        network_id: '*' // Match any network id
      }
    }
  };
```
{% endcode-tabs-item %}

{% code-tabs-item title="Emerald Wallet Client" %}
```javascript
// Default with Emerald
module.exports = {
    networks: {
      development: {
        host: 'localhost',
        port: 8545,
        gas: 6000000,
        network_id: '*' // Match any network id
      }
    }
  };
```
{% endcode-tabs-item %}

{% code-tabs-item title="Ganache Client" %}
```javascript
// Common Ganache Ethereum client config.
module.exports = {
    networks: {
      development: {
        host: 'localhost',
        port: 7545,
        gas: 6000000,
        network_id: 5777
      }
    }
  };
```
{% endcode-tabs-item %}
{% endcode-tabs %}

## Run Emerald Vault

Before running the Emerald TestRPC, we must first install Emerald Vault from [here](https://github.com/ETCDEVTeam/emerald-vault)

A quick way to install it from source is to do the following:

1) Make sure you have Rust installed, which can be done with the following command:

```text
$ curl https://sh.rustup.rs -sSf | sh
```
After you install it, add the following to line to your .bashrc file and source it in 
order to have cargo added to your path `export PATH="$HOME/.cargo/bin:$PATH"`

After you save it in your .bashrc file, type the following to restart your shell:
```text
source ~/.bashrc
```

When you type `cargo` in your terminal, now it should return a list of commands you can use.

2) Now, we will proceed to installing Emerald Vault.

Run the following command:
```text
$ git clone https://github.com/ETCDEVTeam/emerald-vault.git
$ cd emerald-vault
$ cargo build --release
```

This will take a while to compile, but it will install emerald-vault inside `emerald-vault/target/release`.
Next, we run the following command to have it run from our local bin:
```text
$ cp emerald-vault/target/release/emerald-vault /usr/local/bin
$ source ~/.bashrc
```

Now, if you type `emerald-vault -h` from any directory, it should return a list of options to choose.

We then run the emerald-vault server with this command:
```text
$ emerald-vault -v server
```

We leave it running in the background. The `-v` flag is for verbose so that you can see the output 
and the server connection established. It should be connecting to port 1920.

## Run Emerald TestRPC

Within the DApp directory, run `emerald testrpc` to run a local test net Ethereum Classic blockchain

```text
$ emerald testrpc 
address: <account address>
private key: <account's private key>
```

Emerald TestRPC will print several addresses and private keys associated with the test net instance. Leave this terminal open for reference to these accounts and addresses.

## Open Emerald Wallet

In a new terminal window, run `emerald wallet` to launch the Emerald Wallet.

```text
$ emerald wallet
```

Import an Emerald TestRPC account using an account's private key. Emerald Wallet will ask for a password for the account.

Emerald Wallet now has an ETC account to start interacting with DApps.

## Launch The DApp

The Emerald Starter Kit uses utilizes React. In the working DApp directory:

Install package dependencies.

```text
$ npm install
```

Deploy the Emerald DApp with `emerald deploy`

```text
$ emerald deploy
```

Launch the DApp

```text
 $ npm start
```

{% hint style="info" %}
By default Emerald starter-kit launches to [http://localhost:8080/](http://localhost:8080/)
{% endhint %}

![](../.gitbook/assets/screen-shot-2018-09-12-at-2.03.09-am.png)

### Interact with the Smart Contract

The App Bar has an Account selector. These accounts are associated with the Emerald TestRPC Account that was imported into Emerald Wallet. When adding a new ToDo item, the Emerald Wallet will be prompted to open and sign the transaction. When the transaction is signed, the ToDo item will be added to the list.

Enter **Hello World** into the ToDo text field and click **Send Transaction**.

![](../.gitbook/assets/screen-shot-2018-09-12-at-2.10.14-am.png)

Allow the DApp to access Emerald Wallet. Continue to review and sign the transaction.

![](../.gitbook/assets/screen-shot-2018-09-12-at-2.12.59-am.png)

When the transaction is submitted, the ToDo item should have been added to the ToDo list.

![](../.gitbook/assets/screen-shot-2018-09-12-at-2.00.46-am.png)

Congratulations, you've just used an Emerald DApp using a Test Net!

